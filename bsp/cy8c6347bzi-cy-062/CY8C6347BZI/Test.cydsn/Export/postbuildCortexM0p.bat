@REM This script allows a 3rd party IDE to use cymcuelftool.exe to perform
@REM the post processing that is necessary to update the *.elf file
@REM generated by the linker into a complete memory image to use in
@REM programming the PSoC.
@REM NOTE: This script is auto generated. Do not modify.
IF /I "%~4" NEQ "cmsis" GOTO not_cmsis
copy /Y "%~5\cymcuelftool.exe" "%~3\cymcuelftool.exe"
@IF %errorlevel% NEQ 0 EXIT /b %errorlevel%
move /Y "%~1" "%~dp1\%~n1_link.axf"
@IF %errorlevel% NEQ 0 EXIT /b %errorlevel%
"%~3\cymcuelftool.exe" --sign "%~dp1\%~n1_link.axf" --output "%~1"
@IF %errorlevel% NEQ 0 EXIT /b %errorlevel%
EXIT

:not_cmsis
IF /I "%~2" NEQ "eclipse" GOTO not_eclipse
move /y "%~1" "%~n1_link.out"
@IF %errorlevel% NEQ 0 EXIT /b %errorlevel%
.\cymcuelftool.exe --sign "%~n1_link.out" --output "%~1"
@IF %errorlevel% NEQ 0 EXIT /b %errorlevel%
EXIT

:not_eclipse
