/*
 * Copyright 2025 NXP
 *
 * SPDX-License-Identifier: BSD-3-Clause
 */

/***********************************************************************************************************************
 * This file was generated by the MCUXpresso Config Tools. Any manual edits made to this file
 * will be overwritten if the respective MCUXpresso Config Tools is used to update this file.
 **********************************************************************************************************************/
/*
 * How to setup clock using clock driver functions:
 *
 * 1. Call CLOCK_InitXXX() to configure corresponding SCG clock source.
 *    Note: The clock could not be set when it is being used as system clock.
 *    In default out of reset, the CPU is clocked from FIRC(IRC48M),
 *    so before setting FIRC, change to use another avaliable clock source.
 *
 * 2. Call CLOCK_SetXtal0Freq() to set XTAL0 frequency based on board settings.
 *
 * 3. Call CLOCK_SetXxxModeSysClkConfig() to set SCG mode for Xxx run mode.
 *    Wait until the system clock source is changed to target source.
 *
 * 4. If power mode change is needed, call SMC_SetPowerModeProtection() to allow
 *    corresponding power mode and SMC_SetPowerModeXxx() to change to Xxx mode.
 *    Supported run mode and clock restrictions could be found in Reference Manual.
 */

/* clang-format off */
/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
!!GlobalInfo
product: Clocks v15.0
processor: MCXE247
package_id: MCXE247VLQ
mcu_data: ksdk2_0
processor_version: 0.0.0
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/
/* clang-format on */

#include "fsl_smc.h"
#include "clock_config.h"

/*******************************************************************************
 * Definitions
 ******************************************************************************/
#define SIM_LPOCLKS_RTCCLKSEL_LPO32K_CLK 1U /*!< 32 kHz clock source select: LPO32K clock */

/*******************************************************************************
 * Variables
 ******************************************************************************/

/*******************************************************************************
 * Code
 ******************************************************************************/
/*FUNCTION**********************************************************************
 *
 * Function Name : CLOCK_CONFIG_SetRtcClock
 * Description   : Selects RTC clock source.
 * Param src     : The selected clock source.
 *
 *END**************************************************************************/
static void CLOCK_CONFIG_SetRtcClock(uint8_t src)
{
    uint32_t temp;
    temp          = SIM->LPOCLKS;
    temp         &= ~SIM_LPOCLKS_RTCCLKSEL_MASK;
    temp         |= SIM_LPOCLKS_RTCCLKSEL(src);
    SIM->LPOCLKS  = temp;
}

/*FUNCTION**********************************************************************
 *
 * Function Name : CLOCK_CONFIG_FircSafeConfig
 * Description   : This function is used to safely configure FIRC clock.
 *                 In default out of reset, the CPU is clocked from FIRC(IRC48M).
 *                 Before setting FIRC, change to use SIRC as system clock,
 *                 then configure FIRC. After FIRC is set, change back to use FIRC
 *                 in case SIRC need to be configured.
 * Param fircConfig  : FIRC configuration.
 *
 *END**************************************************************************/
static void CLOCK_CONFIG_FircSafeConfig(const scg_firc_config_t *fircConfig)
{
    scg_sys_clk_config_t    curConfig;
    const scg_sirc_config_t scgSircConfig          = {.enableMode = kSCG_SircEnable,
                                                      .div1       = kSCG_AsyncClkDisable,
                                                      .div2       = kSCG_AsyncClkDivBy2,
                                                      .range      = kSCG_SircRangeHigh};
    scg_sys_clk_config_t    sysClkSafeConfigSource = {
           .divSlow = kSCG_SysClkDivBy4, /* Slow clock divider */
           .divBus  = kSCG_SysClkDivBy1, /* Bus clock divider */
           .divCore = kSCG_SysClkDivBy1, /* Core clock divider */
           .src     = kSCG_SysClkSrcSirc /* System clock source */
    };
    /* Init Sirc. */
    CLOCK_InitSirc(&scgSircConfig);
    /* Change to use SIRC as system clock source to prepare to change FIRCCFG register. */
    CLOCK_SetRunModeSysClkConfig(&sysClkSafeConfigSource);
    /* Wait for clock source switch finished. */
    do
    {
        CLOCK_GetCurSysClkConfig(&curConfig);
    } while (curConfig.src != sysClkSafeConfigSource.src);

    /* Init Firc. */
    CLOCK_InitFirc(fircConfig);
    /* Change back to use FIRC as system clock source in order to configure SIRC if needed. */
    sysClkSafeConfigSource.src = kSCG_SysClkSrcFirc;
    CLOCK_SetRunModeSysClkConfig(&sysClkSafeConfigSource);
    /* Wait for clock source switch finished. */
    do
    {
        CLOCK_GetCurSysClkConfig(&curConfig);
    } while (curConfig.src != sysClkSafeConfigSource.src);
}

/*******************************************************************************
 ************************ BOARD_InitBootClocks function ************************
 ******************************************************************************/
void BOARD_InitBootClocks(void)
{
    BOARD_BootClockRUN();
}

/*******************************************************************************
 ********************** Configuration BOARD_BootClockRUN ***********************
 ******************************************************************************/
/* clang-format off */
/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
!!Configuration
name: BOARD_BootClockRUN
called_from_default_init: true
outputs:
- {id: Bus_clock.outFreq, value: 48 MHz}
- {id: Core_clock.outFreq, value: 48 MHz}
- {id: FIRCDIV1_CLK.outFreq, value: 48 MHz}
- {id: FIRCDIV2_CLK.outFreq, value: 48 MHz}
- {id: Flash_clock.outFreq, value: 24 MHz}
- {id: LPO1K_CLK.outFreq, value: 1 kHz}
- {id: LPO_CLK.outFreq, value: 128 kHz}
- {id: LPO_clock.outFreq, value: 128 kHz}
- {id: Prediv_system_clock.outFreq, value: 48 MHz}
- {id: RTC_CLK.outFreq, value: 32 kHz}
- {id: SIRCDIV1_CLK.outFreq, value: 8 MHz}
- {id: SIRCDIV2_CLK.outFreq, value: 4 MHz}
- {id: SIRC_CLK.outFreq, value: 8 MHz}
- {id: SOSCDIV1_CLK.outFreq, value: 8 MHz}
- {id: SOSCDIV2_CLK.outFreq, value: 8 MHz}
- {id: SOSC_CLK.outFreq, value: 8 MHz}
- {id: System_clock.outFreq, value: 48 MHz}
settings:
- {id: SCG.FIRCDIV1.scale, value: '1', locked: true}
- {id: SCG.FIRCDIV2.scale, value: '1', locked: true}
- {id: SCG.SIRCDIV1.scale, value: '1', locked: true}
- {id: SCG.SIRCDIV2.scale, value: '2', locked: true}
- {id: SCG.SOSCDIV1.scale, value: '1', locked: true}
- {id: SCG.SOSCDIV2.scale, value: '1', locked: true}
- {id: SCG_SOSCCFG_OSC_MODE_CFG, value: ModeOscLowPower}
- {id: SCG_SOSCCSR_SOSCEN_CFG, value: Enabled}
- {id: SIM.RTCCLKSEL.sel, value: SIM.LPO32KCLK_DIV}
- {id: SIM_CLKDIV4_TRACEDIVEN_CFG, value: Disabled}
- {id: SIM_CLKDIV4_TRACEDIVEN_DIV_CFG, value: Disabled}
sources:
- {id: SCG.SOSC.outFreq, value: 8 MHz, enabled: true}
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/
/* clang-format on */

/*******************************************************************************
 * Variables for BOARD_BootClockRUN configuration
 ******************************************************************************/
const scg_sys_clk_config_t g_sysClkConfig_BOARD_BootClockRUN =
    {
        .divSlow = kSCG_SysClkDivBy2,  /* Slow Clock Divider: divided by 2 */
        .divBus  = kSCG_SysClkDivBy1,  /* Bus Clock Divider: divided by 1 */
        .divCore = kSCG_SysClkDivBy1,  /* Core Clock Divider: divided by 1 */
        .src     = kSCG_SysClkSrcFirc, /* Fast IRC is selected as System Clock Source */
};
const scg_sosc_config_t g_scgSysOscConfig_BOARD_BootClockRUN =
    {
        .freq        = 8000000U,                   /* System Oscillator frequency: 8000000Hz */
        .enableMode  = kSCG_SysOscEnable,          /* Enable System OSC clock */
        .monitorMode = kSCG_SysOscMonitorDisable,  /* Monitor disabled */
        .div1        = kSCG_AsyncClkDivBy1,        /* System OSC Clock Divider 1: divided by 1 */
        .div2        = kSCG_AsyncClkDivBy1,        /* System OSC Clock Divider 2: divided by 1 */
        .workMode    = kSCG_SysOscModeOscLowPower, /* Oscillator low power */
};
const scg_sirc_config_t g_scgSircConfig_BOARD_BootClockRUN =
    {
        .enableMode = kSCG_SircEnable | kSCG_SircEnableInLowPower, /* Enable SIRC clock, Enable SIRC in low power mode */
        .div1       = kSCG_AsyncClkDivBy1,                         /* Slow IRC Clock Divider 1: divided by 1 */
        .div2       = kSCG_AsyncClkDivBy2,                         /* Slow IRC Clock Divider 2: divided by 2 */
        .range      = kSCG_SircRangeHigh,                          /* Slow IRC high range clock (8 MHz) */
};
const scg_firc_config_t g_scgFircConfig_BOARD_BootClockRUN =
    {
        .enableMode = kSCG_FircEnable,     /* Enable FIRC clock */
        .div1       = kSCG_AsyncClkDivBy1, /* Fast IRC Clock Divider 1: divided by 1 */
        .div2       = kSCG_AsyncClkDivBy1, /* Fast IRC Clock Divider 2: divided by 1 */
        .range      = kSCG_FircRange48M,   /* Fast IRC is trimmed to 48MHz */
        .trimConfig = NULL,                /* Disable trim */
};
/*******************************************************************************
 * Code for BOARD_BootClockRUN configuration
 ******************************************************************************/
void BOARD_BootClockRUN_InitClockModule(clock_module_t module)
{
    scg_sys_clk_config_t curConfig;

    switch (module)
    {
    case kClockModule_SOSC:
        /* Init SOSC according to board configuration. */
        CLOCK_InitSysOsc(&g_scgSysOscConfig_BOARD_BootClockRUN);
        /* Set the XTAL0 frequency based on board settings. */
        CLOCK_SetXtal0Freq(g_scgSysOscConfig_BOARD_BootClockRUN.freq);
        break;
    case kClockModule_FIRC:
        /* Init FIRC.*/
        CLOCK_CONFIG_FircSafeConfig(&g_scgFircConfig_BOARD_BootClockRUN);
        break;
    case kClockModule_PowerMode:
        /* The RUN power mode is set after reset - no initialization code is provided. */
        break;
    case kClockModule_SIRC:
        /* Init SIRC. */
        CLOCK_InitSirc(&g_scgSircConfig_BOARD_BootClockRUN);
        break;
    case kClockModule_SystemClkSrc:
        /* Set SCG to FIRC mode. */
        CLOCK_SetRunModeSysClkConfig(&g_sysClkConfig_BOARD_BootClockRUN);
        /* Wait for clock source switch finished. */
        do
        {
            CLOCK_GetCurSysClkConfig(&curConfig);
        } while (curConfig.src != g_sysClkConfig_BOARD_BootClockRUN.src);
        break;
    case kClockModule_SCG_CLKOUTSEL:
        /* Set SCG CLKOUT selection. */
        CLOCK_SetClkOutSel(kClockClkoutSelFirc);
        break;
    case kClockModule_LPO:
        /* Enable LPO (enabled by default after power on reset). */
        PMC->REGSC &= ~PMC_REGSC_LPODIS_MASK;
        break;
    case kClockModule_RTCClkOut:
        /* Set RTC clock source. */
        CLOCK_CONFIG_SetRtcClock(SIM_LPOCLKS_RTCCLKSEL_LPO32K_CLK);
        break;
    default:
        assert(false);
        break;
    }
}

void BOARD_BootClockRUN(void)
{
    BOARD_BootClockRUN_InitClockModule(kClockModule_SOSC);
    BOARD_BootClockRUN_InitClockModule(kClockModule_FIRC);
    BOARD_BootClockRUN_InitClockModule(kClockModule_SIRC);
    BOARD_BootClockRUN_InitClockModule(kClockModule_SystemClkSrc);
    BOARD_BootClockRUN_InitClockModule(kClockModule_SCG_CLKOUTSEL);
    BOARD_BootClockRUN_InitClockModule(kClockModule_RTCClkOut);
    BOARD_BootClockRUN_InitClockModule(kClockModule_LPO);
    /* Set SystemCoreClock variable. */
    SystemCoreClock = BOARD_BOOTCLOCKRUN_CORE_CLOCK;
}

/*******************************************************************************
 ********************* Configuration BOARD_BootClockVLPR ***********************
 ******************************************************************************/
/* clang-format off */
/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
!!Configuration
name: BOARD_BootClockVLPR
outputs:
- {id: Bus_clock.outFreq, value: 4 MHz}
- {id: Core_clock.outFreq, value: 4 MHz}
- {id: Flash_clock.outFreq, value: 1 MHz}
- {id: LPO1K_CLK.outFreq, value: 1 kHz}
- {id: LPO_CLK.outFreq, value: 128 kHz}
- {id: LPO_clock.outFreq, value: 128 kHz}
- {id: Prediv_system_clock.outFreq, value: 8 MHz}
- {id: RTC_CLK.outFreq, value: 32 kHz}
- {id: SIRCDIV1_CLK.outFreq, value: 4 MHz}
- {id: SIRCDIV2_CLK.outFreq, value: 4 MHz}
- {id: SIRC_CLK.outFreq, value: 8 MHz}
- {id: System_clock.outFreq, value: 4 MHz}
settings:
- {id: SCGMode, value: SIRC}
- {id: powerMode, value: VLPR}
- {id: SCG.DIVBUS.scale, value: '1', locked: true}
- {id: SCG.DIVCORE.scale, value: '2', locked: true}
- {id: SCG.DIVSLOW.scale, value: '4', locked: true}
- {id: SCG.SCSSEL.sel, value: SCG.SIRC}
- {id: SCG.SIRCDIV1.scale, value: '2', locked: true}
- {id: SCG.SIRCDIV2.scale, value: '2', locked: true}
- {id: SIM.RTCCLKSEL.sel, value: SIM.LPO32KCLK_DIV}
- {id: SIM_CLKDIV4_TRACEDIVEN_CFG, value: Disabled}
- {id: SIM_CLKDIV4_TRACEDIVEN_DIV_CFG, value: Disabled}
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/
/* clang-format on */

/*******************************************************************************
 * Variables for BOARD_BootClockVLPR configuration
 ******************************************************************************/
const scg_sys_clk_config_t g_sysClkConfig_BOARD_BootClockVLPR =
    {
        .divSlow = kSCG_SysClkDivBy4,  /* Slow Clock Divider: divided by 4 */
        .divBus  = kSCG_SysClkDivBy1,  /* Bus Clock Divider: divided by 1 */
        .divCore = kSCG_SysClkDivBy2,  /* Core Clock Divider: divided by 2 */
        .src     = kSCG_SysClkSrcSirc, /* Slow IRC is selected as System Clock Source */
};
const scg_sirc_config_t g_scgSircConfig_BOARD_BootClockVLPR =
    {
        .enableMode = kSCG_SircEnable | kSCG_SircEnableInLowPower, /* Enable SIRC clock, Enable SIRC in low power mode */
        .div1       = kSCG_AsyncClkDivBy2,                         /* Slow IRC Clock Divider 1: divided by 2 */
        .div2       = kSCG_AsyncClkDivBy2,                         /* Slow IRC Clock Divider 2: divided by 2 */
        .range      = kSCG_SircRangeHigh,                          /* Slow IRC high range clock (8 MHz) */
};
/*******************************************************************************
 * Code for BOARD_BootClockVLPR configuration
 ******************************************************************************/
void BOARD_BootClockVLPR_InitClockModule(clock_module_t module)
{
    scg_sys_clk_config_t curConfig;

    switch (module)
    {
    case kClockModule_PowerMode:
        /* Allow SMC all power modes. */
        SMC_SetPowerModeProtection(SMC, kSMC_AllowPowerModeAll);
        /* Set VLPR power mode. */
        SMC_SetPowerModeVlpr(SMC);
        while (SMC_GetPowerModeState(SMC) != kSMC_PowerStateVlpr)
        {
        }
        break;
    case kClockModule_SIRC:
        /* Init SIRC. */
        CLOCK_InitSirc(&g_scgSircConfig_BOARD_BootClockVLPR);
        break;
    case kClockModule_SystemClkSrc:
        /* Set SCG to SIRC mode. */
        CLOCK_SetVlprModeSysClkConfig(&g_sysClkConfig_BOARD_BootClockVLPR);
        /* Wait for clock source switch finished. */
        do
        {
            CLOCK_GetCurSysClkConfig(&curConfig);
        } while (curConfig.src != g_sysClkConfig_BOARD_BootClockVLPR.src);
        break;
    case kClockModule_LPO:
        /* Enable LPO (enabled by default after power on reset). */
        PMC->REGSC &= ~PMC_REGSC_LPODIS_MASK;
        break;
    case kClockModule_RTCClkOut:
        /* Set RTC clock source. */
        CLOCK_CONFIG_SetRtcClock(SIM_LPOCLKS_RTCCLKSEL_LPO32K_CLK);
        break;
    default:
        assert(false);
        break;
    }
}

void BOARD_BootClockVLPR(void)
{
    BOARD_BootClockVLPR_InitClockModule(kClockModule_SIRC);
    BOARD_BootClockVLPR_InitClockModule(kClockModule_PowerMode);
    BOARD_BootClockVLPR_InitClockModule(kClockModule_SystemClkSrc);
    BOARD_BootClockVLPR_InitClockModule(kClockModule_RTCClkOut);
    BOARD_BootClockVLPR_InitClockModule(kClockModule_LPO);
    /* Set SystemCoreClock variable. */
    SystemCoreClock = BOARD_BOOTCLOCKVLPR_CORE_CLOCK;
}

/*******************************************************************************
 ********************* Configuration BOARD_BootClockHSRUN **********************
 ******************************************************************************/
/* clang-format off */
/* TEXT BELOW IS USED AS SETTING FOR TOOLS *************************************
!!Configuration
name: BOARD_BootClockHSRUN
outputs:
- {id: Bus_clock.outFreq, value: 56 MHz}
- {id: Core_clock.outFreq, value: 112 MHz}
- {id: FIRCDIV1_CLK.outFreq, value: 48 MHz}
- {id: FIRCDIV2_CLK.outFreq, value: 48 MHz}
- {id: Flash_clock.outFreq, value: 28 MHz}
- {id: LPO1K_CLK.outFreq, value: 1 kHz}
- {id: LPO_CLK.outFreq, value: 128 kHz}
- {id: LPO_clock.outFreq, value: 128 kHz}
- {id: PLLDIV1_CLK.outFreq, value: 112 MHz}
- {id: PLLDIV2_CLK.outFreq, value: 56 MHz}
- {id: Prediv_system_clock.outFreq, value: 112 MHz}
- {id: RTC_CLK.outFreq, value: 32 kHz}
- {id: SIRCDIV1_CLK.outFreq, value: 8 MHz}
- {id: SIRCDIV2_CLK.outFreq, value: 8 MHz}
- {id: SIRC_CLK.outFreq, value: 8 MHz}
- {id: SOSCDIV1_CLK.outFreq, value: 8 MHz}
- {id: SOSCDIV2_CLK.outFreq, value: 8 MHz}
- {id: SOSC_CLK.outFreq, value: 8 MHz}
- {id: System_clock.outFreq, value: 112 MHz}
settings:
- {id: SCGMode, value: SPLL}
- {id: powerMode, value: HSRUN}
- {id: SCG.DIVBUS.scale, value: '2', locked: true}
- {id: SCG.DIVCORE.scale, value: '1', locked: true}
- {id: SCG.DIVSLOW.scale, value: '4', locked: true}
- {id: SCG.FIRCDIV1.scale, value: '1', locked: true}
- {id: SCG.FIRCDIV2.scale, value: '1', locked: true}
- {id: SCG.PREDIV.scale, value: '1', locked: true}
- {id: SCG.SCSSEL.sel, value: SCG.SPLL_DIV2_CLK}
- {id: SCG.SIRCDIV1.scale, value: '1', locked: true}
- {id: SCG.SIRCDIV2.scale, value: '1', locked: true}
- {id: SCG.SOSCDIV1.scale, value: '1', locked: true}
- {id: SCG.SOSCDIV2.scale, value: '1', locked: true}
- {id: SCG.SPLLDIV1.scale, value: '1', locked: true}
- {id: SCG.SPLLDIV2.scale, value: '2', locked: true}
- {id: SCG.SPLL_mul.scale, value: '28', locked: true}
- {id: SCG_SOSCCFG_OSC_MODE_CFG, value: ModeOscLowPower}
- {id: SCG_SOSCCSR_SOSCEN_CFG, value: Enabled}
- {id: SCG_SPLLCSR_SPLLEN_CFG, value: Enabled}
- {id: SIM.RTCCLKSEL.sel, value: SIM.LPO32KCLK_DIV}
- {id: SIM_CLKDIV4_TRACEDIVEN_CFG, value: Disabled}
- {id: SIM_CLKDIV4_TRACEDIVEN_DIV_CFG, value: Disabled}
sources:
- {id: SCG.SOSC.outFreq, value: 8 MHz, enabled: true}
 * BE CAREFUL MODIFYING THIS COMMENT - IT IS YAML SETTINGS FOR TOOLS **********/
/* clang-format on */

/*******************************************************************************
 * Variables for BOARD_BootClockHSRUN configuration
 ******************************************************************************/
const scg_sys_clk_config_t g_sysClkConfig_BOARD_BootClockHSRUN =
    {
        .divSlow = kSCG_SysClkDivBy4,    /* Slow Clock Divider: divided by 4 */
        .divBus  = kSCG_SysClkDivBy2,    /* Bus Clock Divider: divided by 2 */
        .divCore = kSCG_SysClkDivBy1,    /* Core Clock Divider: divided by 1 */
        .src     = kSCG_SysClkSrcSysPll, /* System PLL is selected as System Clock Source */
};
const scg_sosc_config_t g_scgSysOscConfig_BOARD_BootClockHSRUN =
    {
        .freq        = 8000000U,                   /* System Oscillator frequency: 8000000Hz */
        .enableMode  = kSCG_SysOscEnable,          /* Enable System OSC clock */
        .monitorMode = kSCG_SysOscMonitorDisable,  /* Monitor disabled */
        .div1        = kSCG_AsyncClkDivBy1,        /* System OSC Clock Divider 1: divided by 1 */
        .div2        = kSCG_AsyncClkDivBy1,        /* System OSC Clock Divider 2: divided by 1 */
        .workMode    = kSCG_SysOscModeOscLowPower, /* Oscillator low power */
};
const scg_sirc_config_t g_scgSircConfig_BOARD_BootClockHSRUN =
    {
        .enableMode = kSCG_SircEnable | kSCG_SircEnableInLowPower, /* Enable SIRC clock, Enable SIRC in low power mode */
        .div1       = kSCG_AsyncClkDivBy1,                         /* Slow IRC Clock Divider 1: divided by 1 */
        .div2       = kSCG_AsyncClkDivBy1,                         /* Slow IRC Clock Divider 2: divided by 1 */
        .range      = kSCG_SircRangeHigh,                          /* Slow IRC high range clock (8 MHz) */
};
const scg_firc_config_t g_scgFircConfig_BOARD_BootClockHSRUN =
    {
        .enableMode = kSCG_FircEnable,     /* Enable FIRC clock */
        .div1       = kSCG_AsyncClkDivBy1, /* Fast IRC Clock Divider 1: divided by 1 */
        .div2       = kSCG_AsyncClkDivBy1, /* Fast IRC Clock Divider 2: divided by 1 */
        .range      = kSCG_FircRange48M,   /* Fast IRC is trimmed to 48MHz */
        .trimConfig = NULL,                /* Disable trim */
};
const scg_spll_config_t g_scgSysPllConfig_BOARD_BootClockHSRUN =
    {
        .enableMode  = kSCG_SysPllEnable,         /* Enable SPLL clock */
        .monitorMode = kSCG_SysPllMonitorDisable, /* Monitor disabled */
        .div1        = kSCG_AsyncClkDivBy1,       /* System PLL Clock Divider 1: divided by 1 */
        .div2        = kSCG_AsyncClkDivBy2,       /* System PLL Clock Divider 2: divided by 2 */
        .prediv      = 0,                         /* Divided by 1 */
        .mult        = 12,                        /* Multiply Factor is 28 */
};
/*******************************************************************************
 * Code for BOARD_BootClockHSRUN configuration
 ******************************************************************************/
void BOARD_BootClockHSRUN_InitClockModule(clock_module_t module)
{
    scg_sys_clk_config_t curConfig;

    switch (module)
    {
    case kClockModule_SOSC:
        /* Init SOSC according to board configuration. */
        CLOCK_InitSysOsc(&g_scgSysOscConfig_BOARD_BootClockHSRUN);
        /* Set the XTAL0 frequency based on board settings. */
        CLOCK_SetXtal0Freq(g_scgSysOscConfig_BOARD_BootClockHSRUN.freq);
        break;
    case kClockModule_FIRC:
        /* Init FIRC.*/
        CLOCK_CONFIG_FircSafeConfig(&g_scgFircConfig_BOARD_BootClockHSRUN);
        break;
    case kClockModule_PowerMode:
        /* Set HSRUN power mode. */
        SMC_SetPowerModeProtection(SMC, kSMC_AllowPowerModeAll);
        SMC_SetPowerModeHsrun(SMC);
        while (SMC_GetPowerModeState(SMC) != kSMC_PowerStateHsrun)
        {
        }

        break;
    case kClockModule_SIRC:
        /* Init SIRC. */
        CLOCK_InitSirc(&g_scgSircConfig_BOARD_BootClockHSRUN);
        break;
    case kClockModule_SPLL:
        /* Init SysPll. */
        CLOCK_InitSysPll(&g_scgSysPllConfig_BOARD_BootClockHSRUN);
        break;
    case kClockModule_SystemClkSrc:
        /* Set SCG to SPLL mode. */
        CLOCK_SetHsrunModeSysClkConfig(&g_sysClkConfig_BOARD_BootClockHSRUN);
        /* Wait for clock source switch finished. */
        do
        {
            CLOCK_GetCurSysClkConfig(&curConfig);
        } while (curConfig.src != g_sysClkConfig_BOARD_BootClockHSRUN.src);
        break;
    case kClockModule_SCG_CLKOUTSEL:
        /* Set SCG CLKOUT selection. */
        CLOCK_SetClkOutSel(kClockClkoutSelFirc);
        break;
    case kClockModule_LPO:
        /* Enable LPO (enabled by default after power on reset). */
        PMC->REGSC &= ~PMC_REGSC_LPODIS_MASK;
        break;
    case kClockModule_RTCClkOut:
        /* Set RTC clock source. */
        CLOCK_CONFIG_SetRtcClock(SIM_LPOCLKS_RTCCLKSEL_LPO32K_CLK);
        break;
    default:
        assert(false);
        break;
    }
}

void BOARD_BootClockHSRUN(void)
{
    BOARD_BootClockHSRUN_InitClockModule(kClockModule_SOSC);
    BOARD_BootClockHSRUN_InitClockModule(kClockModule_FIRC);
    BOARD_BootClockHSRUN_InitClockModule(kClockModule_SIRC);
    BOARD_BootClockHSRUN_InitClockModule(kClockModule_PowerMode);
    BOARD_BootClockHSRUN_InitClockModule(kClockModule_SPLL);
    BOARD_BootClockHSRUN_InitClockModule(kClockModule_SystemClkSrc);
    BOARD_BootClockHSRUN_InitClockModule(kClockModule_SCG_CLKOUTSEL);
    BOARD_BootClockHSRUN_InitClockModule(kClockModule_RTCClkOut);
    BOARD_BootClockHSRUN_InitClockModule(kClockModule_LPO);
    /* Set SystemCoreClock variable. */
    SystemCoreClock = BOARD_BOOTCLOCKHSRUN_CORE_CLOCK;
}
